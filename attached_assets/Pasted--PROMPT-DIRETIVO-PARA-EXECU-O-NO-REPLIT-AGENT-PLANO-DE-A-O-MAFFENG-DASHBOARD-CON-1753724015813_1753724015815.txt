**識 PROMPT DIRETIVO PARA EXECUﾃﾃグ NO REPLIT AGENT: PLANO DE Aﾃﾃグ MAFFENG DASHBOARD**

---

**桃 CONTEXTO GERAL**
O sistema MAFFENG ﾃｩ um painel de gestﾃ｣o de despesas jﾃ｡ funcional, com arquitetura baseada em React + Supabase, responsividade mobile, autenticaﾃｧﾃ｣o por sessﾃ｣o, filtros e relatﾃｳrios. Identificamos pendﾃｪncias e funcionalidades ausentes que serﾃ｣o tratadas em trﾃｪs fases: Correﾃｧﾃｵes Crﾃｭticas, Melhorias Imediatas e Expansﾃ｣o.

---

### 笨 FASE 1 - CORREﾃﾃ髭S CRﾃ控ICAS (Prioridade Mﾃ｡xima)

1. **Corrigir Erro 401 na Autenticaﾃｧﾃ｣o:**
   - Verifique se o `access_token` estﾃ｡ sendo salvo corretamente no `localStorage` ou `cookies`
   - Confirme se o Supabase estﾃ｡ com persistﾃｪncia de sessﾃ｣o habilitada (`persistSession: true`)
   - Teste o `supabase.auth.getSession()` apﾃｳs recarregar a pﾃ｡gina
   - Implemente `supabase.auth.onAuthStateChange()` para restaurar sessﾃ｣o automaticamente
   - Verifique se algum `middleware` do Vite estﾃ｡ bloqueando os headers de autorizaﾃｧﾃ｣o

2. **Limpeza de Arquivos de Debug:**
   - Remova todos os arquivos cookies_*.txt da raiz do projeto
   - Apague arquivos temporﾃ｡rios, mock folders e "attached_assets" obsoletos

3. **Atualizar Dependﾃｪncias:**
   - Rode `npx update-browserslist-db@latest`
   - Atualize pacotes desatualizados com `npm outdated` e `npm update`

---

### 屏 FASE 2 - MELHORIAS IMEDIATAS (2 Semanas)

1. **Implementar Pﾃ｡gina "Minha Conta":**
   - Criar `client/src/pages/minha-conta.tsx`
   - Campos: nome, email, foto, alteraﾃｧﾃ｣o de senha (opcional), preferﾃｪncias de notificaﾃｧﾃ｣o
   - Rota: `/minha-conta`
   - Reutilize o sistema de roles e hooks de `useUser`

2. **Melhorar Sistema de Erros Globais:**
   - Centralizar erros usando `ErrorBoundary`
   - Criar componente `GlobalErrorSnackbar` com mensagens amigﾃ｡veis
   - Adicionar retry automﾃ｡tico para `fetch` e `mutations` com falha

---

### 噫 FASE 3 - EXPANSﾃグ (1 Mﾃｪs)

1. **Sistema de Notificaﾃｧﾃｵes:**
   - Criar contexto de notificaﾃｧﾃｵes com React Context
   - Adicionar alertas de vencimento para despesas/receitas
   - Planejar push notifications no futuro (via Supabase Edge Functions)

2. **Analytics Avanﾃｧado:**
   - Adicionar projeﾃｧﾃｵes futuras e metas
   - Criar comparaﾃｧﾃ｣o entre perﾃｭodos (ex: mes atual vs anterior)
   - Utilizar novo componente: `TrendsComparisonGraph`

---

### 刀 ORGANIZAﾃﾃグ E DOCUMENTAﾃﾃグ

- Criar ou revisar os seguintes arquivos na raiz do projeto:
   - `README.md`: instruﾃｧﾃｵes de instalaﾃｧﾃ｣o e uso
   - `CHANGELOG.md`: registrar atualizaﾃｧﾃｵes e hotfixes
   - `TROUBLESHOOTING.md`: guia de erros comuns e soluﾃｧﾃｵes
   - `DEPLOY.md`: passo a passo de publicaﾃｧﾃ｣o no ambiente atual

---

### 捷 VERSIONAMENTO

- Versﾃ｣o atual: **v2.0.0**
- Apﾃｳs cada fase:
   - `v2.0.1`: Correﾃｧﾃ｣o de autenticaﾃｧﾃ｣o
   - `v2.1.0`: Pﾃ｡gina de perfil
   - `v2.2.0`: Sistema de notificaﾃｧﾃｵes
   - `v3.0.0`: Analytics avanﾃｧado

---

### 笨 CHECK FINAL: TESTES EM TODOS OS FLUXOS
- Login
- Dashboard
- CRUD de despesas e faturamento
- Upload e relatﾃｳrios
- Cﾃ｡lculo de lucro e filtros

---

**Executar cada etapa com commits organizados e comentados. Seguir esse roadmap rigorosamente.**

**MANTER CONTATO ATIVO COM O TIME DE DESIGN E PRODUTO EM CADA MUDANﾃ② SIGNIFICATIVA.**